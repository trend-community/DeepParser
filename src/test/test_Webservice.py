import unittest
from RestfulService import *


class WebserviceTest(unittest.TestCase):
    def testChart(self):
        nodes1 = """
        {"EndOffset": 7, "StartOffset": 0, "features": [], "sons": [{"EndOffset": 2, "StartOffset": 0, "features": ["0", "V", "VN9", "vi", "attrC", "vn", "send", "Commerce"], "text": "发货"}, {"EndOffset": 3, "StartOffset": 2, "features": ["phy", "0", "perOrg", "anim", "n", "N", "per", "unit"], "text": "员"}, {"EndOffset": 5, "StartOffset": 3, "features": ["Down", "0", "modJJ", "A", "emph", "situation", "nt", "attitude", "ntA", "nEmo", "sent", "bad", "passion", "xx"], "text": "严重"}, {"EndOffset": 7, "StartOffset": 5, "features": ["vi", "0", "despise", "V", "vn", "con", "sent", "VN9", "nt"], "text": "失职"}], "text": "发货员严重失职"}
        """
        orgdata = str(Graphviz.orgChart(nodes1))
        print(orgdata)
        self.assertEqual(orgdata, """[['发货员严重失职', '', 'features: EndOffset :7 StartOffset :0'], [{'v': '发货0', 'f': '发货'}, '发货员严重失职', 'features: 0 V VN9 vi attrC vn send Commerce EndOffset :2  StartOffset :0'], ['发货员严重失职', '', 'features: EndOffset :7 StartOffset :0'], [{'v': '员2', 'f': '员'}, '发货员严重失职', 'features: phy 0 perOrg anim n N per unit EndOffset :3  StartOffset :2'], ['发货员严重失职', '', 'features: EndOffset :7 StartOffset :0'], [{'v': '严重3', 'f': '严重'}, '发货员严重失职', 'features: Down 0 modJJ A emph situation nt attitude ntA nEmo sent bad passion xx EndOffset :5  StartOffset :3'], ['发货员严重失职', '', 'features: EndOffset :7 StartOffset :0'], [{'v': '失职5', 'f': '失职'}, '发货员严重失职', 'features: vi 0 despise V vn con sent VN9 nt EndOffset :7  StartOffset :5']]""")

        nodes2 = """
        {"EndOffset": 20, "StartOffset": 0, "features": [], "sons": [{"EndOffset": 4, "StartOffset": 0, "features": ["thinking", "vVB", "V", "Pred", "v", "VG", "stateV", "animF", "VN9", "vJJ", "speak", "vS", "perF"], "sons": [{"EndOffset": 3, "StartOffset": 0, "features": ["thinking", "vVB", "V", "Pred", "v", "VG", "stateV", "animF", "VN9", "vJJ", "VP", "speak", "vS", "perF"], "sons": [{"EndOffset": 1, "StartOffset": 0, "features": ["thinking", "0", "vVB", "V", "Pred", "v", "VG", "stateV", "animF", "vt", "VN9", "vJJ", "VP", "speak", "vS", "perF"], "text": "说"}, {"EndOffset": 3, "StartOffset": 1, "UpperRelationship": "^.O", "features": ["nEmo", "deBuyu", "V", "Pred", "sent", "VG", "bad", "perfect", "passion", "c1clear", "N0", "freeM", "pred", "nt", "attitude", "ntA"], "sons": [{"EndOffset": 2, "StartOffset": 1, "features": ["0", "deBuyu", "V", "VG", "perfect", "c1clear", "pred", "freeM", "nt", "attitude", "ntA", "nEmo", "XP", "Pred", "sent", "bad", "passion", "N0"], "text": "错"}, {"EndOffset": 3, "StartOffset": 2, "UpperRelationship": "^.X", "features": ["0", "V0", "EX", "vac", "xC"], "text": "了"}], "text": "错了"}], "text": "说错了"}, {"EndOffset": 4, "StartOffset": 3, "UpperRelationship": "^.O", "features": ["phy", "0", "V0", "info", "equivN", "animF", "inanim", "text", "N", "speak", "freeM", "n", "perF"], "text": "话"}], "text": "说错了话"}, {"EndOffset": 5, "StartOffset": 4, "features": ["0", "punc"], "text": ","}, {"EndOffset": 9, "StartOffset": 5, "features": ["thinking", "vVB", "V", "Pred", "v", "VG", "stateV", "animF", "perfect", "VN9", "vJJ", "speak", "pred", "vS", "perF"], "sons": [{"EndOffset": 7, "StartOffset": 5, "features": ["thinking", "vVB", "V", "Pred", "v", "VG", "stateV", "animF", "perfect", "vJJ", "VP", "speak", "VN9", "pred", "vS", "perF"], "sons": [{"EndOffset": 6, "StartOffset": 5, "features": ["thinking", "0", "vVB", "XP", "V", "Pred", "v", "VG", "stateV", "animF", "vt", "perfect", "vJJ", "speak", "pred", "vS", "perF"], "text": "说"}, {"EndOffset": 7, "StartOffset": 6, "UpperRelationship": "^.X", "features": ["0", "V0", "EX", "vac", "xC"], "text": "了"}], "text": "说了"}, {"EndOffset": 9, "StartOffset": 7, "UpperRelationship": "^.O", "atom": "话语", "features": ["phy", "0", "con", "equivN", "info", "sent", "symbol", "expression", "inanim", "N", "text", "n", "nt"], "text": "错话"}], "text": "说了错话"}, {"EndOffset": 10, "StartOffset": 9, "features": ["0", "punc"], "text": ","}, {"EndOffset": 14, "StartOffset": 10, "features": ["con", "perfect", "nt", "ntA", "Pred", "sent", "sv", "V", "deBuyu", "VG", "c1clear", "pred", "freeM", "attitude", "nEmo", "bad", "passion", "N0"], "sons": [{"EndOffset": 12, "StartOffset": 10, "UpperRelationship": "^s", "features": ["attrC", "vi", "0", "V", "withWhom", "vn", "talk", "animF", "VN9", "speak", "perF"], "text": "说话"}, {"EndOffset": 14, "StartOffset": 12, "features": ["deBuyu", "V", "con", "AP", "VG", "perfect", "sv", "c1clear", "freeM", "pred", "nt", "attitude", "ntA", "nEmo", "XP", "Pred", "sent", "bad", "passion", "N0"], "sons": [{"EndOffset": 13, "StartOffset": 12, "features": ["0", "deBuyu", "V", "VG", "perfect", "c1clear", "pred", "freeM", "nt", "attitude", "ntA", "nEmo", "XP", "Pred", "sent", "bad", "passion", "N0"], "text": "错"}, {"EndOffset": 14, "StartOffset": 13, "UpperRelationship": "^.X", "features": ["0", "V0", "EX", "vac", "xC"], "text": "了"}], "text": "错了"}], "text": "说话错了"}, {"EndOffset": 15, "StartOffset": 14, "features": ["0", "punc"], "text": ","}, {"EndOffset": 17, "StartOffset": 15, "features": ["0", "vac", "EX", "xC"], "text": "话说"}, {"EndOffset": 19, "StartOffset": 17, "features": ["nEmo", "deBuyu", "V", "Pred", "sent", "VG", "bad", "perfect", "passion", "c1clear", "N0", "freeM", "pred", "nt", "attitude", "ntA"], "sons": [{"EndOffset": 18, "StartOffset": 17, "features": ["0", "deBuyu", "V", "VG", "perfect", "c1clear", "pred", "freeM", "nt", "attitude", "ntA", "nEmo", "XP", "Pred", "sent", "bad", "passion", "N0"], "text": "错"}, {"EndOffset": 19, "StartOffset": 18, "UpperRelationship": "^.X", "features": ["0", "V0", "EX", "vac", "xC"], "text": "了"}], "text": "错了"}, {"EndOffset": 20, "StartOffset": 19, "features": ["0", "OOV", "punc", "NNP"], "text": "。"}], "text": "说错了话,说了错话,说话错了,话说错了。"}
        """

        orgdata = str(Graphviz.orgChart(nodes2))
        print(orgdata)